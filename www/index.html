<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Pawnpire Assistant</title>
    </head>
    <body>
        <h1>Pawnpire Assistant</h1>
        <div id="deviceready" class="blink">
            <img src="https://www.pawnpire.com/img/Pawn-Coat-Of-Arms-final.png" class="armorium">
            <div id="status"></div>
            <a class="button go_to" id="menu">Go Back</a>
            <div class="screen login">
                <div class="login">
                  <span class="script">The sun never sets on the Pawnpire</span>
                  <form action="" id="UserLoginForm" method="post" accept-charset="utf-8">
                    <div style="display:none;"><input type="hidden" name="_method" value="POST"></div>
                     <div class="input text required">
                        <input name="data[User][username]" class="loginDes" placeholder="Username" maxlength="50" type="text" id="UserUsername" required="required" autocomplete="off">
                     </div>    
                     <br>
                     <div class="loginPad"></div>
                    <div class="input password required"><input name="data[User][password]" class="loginDes" placeholder="Password" type="password" id="UserPassword" required="required" autocomplete="off"></div>
                    <br><div class="loginPad"></div>
                    <button class="buttonDes" id="login">LOGIN</button>
                  </form>
                </div>
            </div>
            <div class="screen menu">
              <h2>Choose Task</h2>
              <a class="button go_to" id="warehouse_checkin">Warehouse Checkin</a><br>
              <a class="button go_to" id="create_invoice">Create Invoice</a><br>
              <a class="button go_to" id="shipping_issues">Shipping Issues</a><br>
              <a class="button go_to" id="relist">Relist</a><br>
              <a class="button go_to" id="check_shipping">Check Shipping</a><br>
              <a class="button go_to" id="checkout">Checkout</a><br>
              <a class="button go_to" id="uncheckout">Uncheckout</a><br>
              <a class="button go_to" id="audit_project">July Audit Project</a><br>
              <a class="button go_to" id="audit">Audit</a><br>
              <a class="button go_to" id="find_locations">Find Locations</a><br>
              <a class="button go_to" id="ship_order">Ship Order</a><br>
              <a class="button go_to" id="check_order">Check Order</a><br>
              <a class="button go_to" id="report_not_found">Report Not Found</a><br>
              <a class="button go_to" id="check_for_pull">Check For Pull</a><br>
              <a class="button go_to" id="add_to_audit_group">Add To Audit Group</a><br>
              <a class="button go_to" id="create_audit_group">Create Audit Group</a><br>
              <a class="button go_to" id="flea_market">Record Flea Market</a><br>
              <a class="button go_to" id="check_pallet">Check Pallet</a><br>
              <a class="button go_to" id="check_upc_cost">Check Cost</a><br>
              <a class="button go_to" id="list_to_amazon">List To Amazon</a><br>
              <a class="button go_to" id="pallet_location">Check In Pallet Item</a><br>
              <a class="button go_to" id="create_warehouse_bin">Create Warehouse Bin</a><br>
              <a class="button go_to" id="logout">Logout</a>
              <a href="http://pawnpire.com/latest.apk" style="
                text-align: center;
                display: block;
                color: red;
                text-decoration: none;
                margin-top: 22px;
                font-size: 20px;
                ">Download Latest APK</a>
            </div>
            <div class="screen create_warehouse_bin">
              <h2>Create Warehouse Bin</h2>
              <div class="enter_serial">
                <form id="check_upc_cost_form" onsubmit="return false;">
                  <label>Bin ID</label>
                  <input class="serial" type="text"><br>
                  <label>Cost</label>
                  <input class="bin_cost" type="text" style="height: 40px; width: 66%; font-size: 45px;"><br>
                  <label>Estimate</label>
                  <input class="bin_estimate" type="text" style="height: 40px; width: 66%; font-size: 45px;"><br>
                  <button id="create_warehouse_bin_btn" class="button">Submit</button> 
                </form>
              </div>
            </div>
            <div class="screen check_upc_cost">
              <h2>Check Cost</h2>
              <div class="enter_serial">
                <form id="check_upc_cost_form" onsubmit="return false;">
                  <label>UPC</label>
                  <input class="serial" type="text"><br>
                  <button id="submit_upc_cost_check" class="button">Submit</button> 
                </form>
              </div>
            </div>
            <div class="screen pallet_location">
              <h2>Check Pallet</h2>
              <div class="enter_serial">
                <form id="pallet_location_form" onsubmit="return false;">
                  <label>UPC</label>
                  <input class="serial" type="text"><br>
                  <label>Location</label>
                  <input class="upc_location" type="text" style="height: 40px; width: 66%; font-size: 45px;"><br>
                  <label>Amount</label>
                  <input class="upc_amount" type="text" style="height: 40px; width: 66%; font-size: 45px;"><br><br><br>
                  <button id="submit_upc_location" class="button">Submit</button> 
                </form>
              </div>
            </div>
            <div class="screen check_pallet">
              <h2>Check Pallet</h2>
              <div class="enter_serial">
                <form id="check_pallet_form" onsubmit="return false;">
                  <label>Pallet Number</label>
                  <input class="serial" type="text"><br><br>
                  <div id="pallet_contents" style="color: white;padding:15px;">
                  </div>
                </form>
              </div>
            </div>
            <div class="screen audit_project">
              <h2>July Audit Project</h2>
              <div class="enter_serial">
                <form id="audit_project_form" onsubmit="return false;">
                  <label>Serial</label>
                  <input class="serial" type="text"><br><br>
                  <button id="serial_audit_projct_submit" class="button">Search</button> 
                  <div class="location" style="display: none">
                    <label>Location</label> 
                    <input class="location_input" type="text" style="height: 40px; width: 66%; font-size: 45px;"><br>
                    <em style="color: red;max-width: 80%;display: block;margin: auto;margin-top: 20px;margin-bottom: 20px;">Please confirm this location is accurate and hit submit to add this item to the audit group</em>
                    <button id="submit_audit_project_form" class="button">Submit</button> 
                  </div>
                </form>
              </div> 
            </div>
            <div class="screen check_shipping">
              <h2>Check Shipping</h2>
              <div class="enter_serial">
                <form id="check_shipping_form" onsubmit="return false">
                  <label>Ebay Order #</label>
                  <input class="serial" type="text">
                </form>
              </div>
            </div>
            <div class="screen check_for_pull">
              <h2>Check Serial</h2>
              <div class="enter_serial">
                <form id="check_serial" onsubmit="return false">
                  <label>Serial</label>
                  <input name="data[PullList][inventory_item_id]" class="serial" type="text">
                </form>
              </div>
              <div id="pull_status"></div>
            </div>
            <div class="screen flea_market">
              <h2>Record Flea Market Sale</h2>
              <div class="enter_serial">
                <form id="flea_market_sale" onsubmit="return false">
                  <label>Flea Market</label>
                  <select name="data[InventoryItem][sale_method]" id="sale_method" style="height: 63px;width: 66%;font-size: 45px;">
                    <option value="">Choose</option>
                    <option>Meadowlands</option>
                    <option>Brooklyn</option>
                    <option>Englishtown</option>
                  </select>
                  
                  <label>Serial Number</label>
                  <input name="data[InventoryItem][id]" class="serial" type="text">

                  <label>Price</label>
                  <input name="data[InventoryItem][sale_price]" class="price" style="height: 40px; width: 66%; font-size: 45px;"> 
                </form>
              </div>
            </div> 
            <div class="screen create_audit_group">
              <h2>Create Audit Group</h2>
              <div class="enter_serial">
                <form id="audit_group_add" onsubmit="return false">
                  <label>Audit Group Name</label>
                  <input name="data[AuditGroup][name]" class="serial" type="text">
                </form>
              </div>
            </div>
            <div class="screen add_to_audit_group">
              <h2>Add To Audit Group</h2>
              <div class="enter_serial">
                <form id="audit_group" onsubmit="return false">
                  <label>Audit Group</label>
                  <select name="data[AuditGroupsInventoryItem][audit_group_id]" id="audit_groups" style="height: 63px;width: 66%;font-size: 45px;"></select>

                  <label>Serial Number/Custom Label</label>
                  <input name="data[AuditGroupsInventoryItem][inventory_item_id]" class="serial" type="text">
                </form>
              </div>
            </div>
            <div class="screen report_not_found">
              <h2>Report Item Not Found</h2>
              <div class="enter_serial">
                <form id="notFoundForm" onsubmit="return false">
                  <label>Order ID</label>
                  <input name="data[Issue][order_id]" style="height: 40px; width: 66%; font-size: 45px;" type="number">

                  <label>Note</label>
                  <textarea name="data[Issue][message]" class="message"></textarea>

                  <label>Serial Number</label>
                  <input name="data[Issue][inventory_item_id]" class="serial" type="text">
                </form>
              </div>
            </div>
            <div class="screen shipping_issues">
              <h2>Shipping Issues</h2>
              <input name="shipping_issue_search" id="shipping_issue_search" style="height: 40px;width: 43%;font-size: 45px;margin: auto;display: block;" type="text"><br>
              <div id="globalstatus">
                <h3>Cancelled Orders</h3>
                <ul style="list-style-type: none;" class="cancelled_orders"> </ul>
                <h3>Other Issues</h3>
                <ul style="list-style-type: none;" class="other_issues"> </ul>
              </div>
            </div>
            <div class="screen check_order">  
              <h2>Check Order</h2>
              <div class="enter_serial">
                <form id="check_order_form" onsubmit="return false;">
                  <label>Order Number</label>
                  <input name="data[EbayOrder][sales_record_number]" type="number" class="serial">
                  <div id="check_order_form_response"></div>
                </form>
              </div>
            </div>
            <div class="screen ship_order">
              <h2>Ship Order</h2>
              <div class="enter_serial">
                <form id="ship_order_form" onsubmit="return false;">
                  <label>Box Type</label>
                  <select name="data[InventoryItem][box_id]" id="InventoryItemBoxId" style="height: 59px; width: 66%; font-size: 45px;">
                    <option value="">Choose</option>
                    <option value="1">10 x 10 x 10"</option>
                    <option value="2">10 x 10 x 5"</option>
                    <option value="3">16 x 10 x 10"</option>
                    <option value="4">18 x 12 x 6"</option>
                    <option value="5">18 x 6 x 45" (Guitar Box)</option>
                    <option value="6">20 x 14 x 16"  </option>
                    <option value="7">20 x 14 x 6"</option>
                    <option value="8">20 x 20 x 20" </option>
                    <option value="9">20 x 8 x 50" (Guitar Box)</option>
                    <option value="10">24 x 14 x 14"</option>
                    <option value="11">24 x 24 x 24"</option>
                    <option value="12">28 x 18 x 18"</option>
                    <option value="13">54" x 8" x 28" (Bike-Small)</option>
                    <option value="14">56" x 10" x 32" (Bike-Large)</option>
                    <option value="15">6 x 6 x 2"</option>
                    <option value="16">7 x 7 x 3"</option>
                    <option value="17">8 x 6 x 4" </option>
                    <option value="18">8 x 8 x 60"</option>
                    <option value="19">Bubble Mailer Envelope - 11 1/2" x 8 1/4" </option>
                    <option value="20">Bubble Mailer Envelope - 5" x 10"</option>
                    <option value="21">Tear-Proof Polyethylene Mailers - 10" x 13"  (Non-Fragile Items Only)</option>
                    <option value="22">Tear-Proof Polyethylene Mailers  - 12" x 15 1/2" (Non-Fragile Items Only)</option>
                    <option value="23">Tear-Proof Polyethylene Mailers  - 6" x 9" (Non-Fragile Items Only)</option>
                    <option value="24">Tear-Proof Polyethylene Mailers - 7 1/2" x 10 1/2" (Non-Fragile Items Only)</option>
                    <option value="25">Tear-Proof Polyethylene Mailers - 9" x 12" (Non-Fragile Items Only)</option>
                    <option value="26">7 1/2" x 5 1/8" x 14 3/8" (FREE USPS BOX)</option>
                    <option value="27">7" x 7" x 6" (FREE USPS BOX)</option>
                    <option value="28">11.5" x 2.5" x 13.5" (FREE USPS BOX)</option>
                    <option value="29">12.5" x 3" x 15" (FREE USPS BOX)</option>
                    <option value="30">12" x 12" x 8" (FREE USPS BOX)</option>
                    <option value="31">No Box</option>
                    <option value="33">Standard U-Line Brown Box (24 x 14 x 10)</option>
                  </select>

                  <div id="box_type_2" style="display: none;">
                    <label>Box Type 2</label>
                    <select name="data[InventoryItem][box_id_2]" id="InventoryItemBoxId2" style="height: 59px; width: 66%; font-size: 45px;">
                      <option value="">Choose</option>
                      <option value="1">10 x 10 x 10"</option>
                      <option value="2">10 x 10 x 5"</option>
                      <option value="3">16 x 10 x 10"</option>
                      <option value="4">18 x 12 x 6"</option>
                      <option value="5">18 x 6 x 45" (Guitar Box)</option>
                      <option value="6">20 x 14 x 16"  </option>
                      <option value="7">20 x 14 x 6"</option>
                      <option value="8">20 x 20 x 20" </option>
                      <option value="9">20 x 8 x 50" (Guitar Box)</option>
                      <option value="10">24 x 14 x 14"</option>
                      <option value="11">24 x 24 x 24"</option>
                      <option value="12">28 x 18 x 18"</option>
                      <option value="13">54" x 8" x 28" (Bike-Small)</option>
                      <option value="14">56" x 10" x 32" (Bike-Large)</option>
                      <option value="15">6 x 6 x 2"</option>
                      <option value="16">7 x 7 x 3"</option>
                      <option value="17">8 x 6 x 4" </option>
                      <option value="18">8 x 8 x 60"</option>
                      <option value="19">Bubble Mailer Envelope - 11 1/2" x 8 1/4" </option>
                      <option value="20">Bubble Mailer Envelope - 5" x 10"</option>
                      <option value="21">Tear-Proof Polyethylene Mailers - 10" x 13"  (Non-Fragile Items Only)</option>
                      <option value="22">Tear-Proof Polyethylene Mailers  - 12" x 15 1/2" (Non-Fragile Items Only)</option>
                      <option value="23">Tear-Proof Polyethylene Mailers  - 6" x 9" (Non-Fragile Items Only)</option>
                      <option value="24">Tear-Proof Polyethylene Mailers - 7 1/2" x 10 1/2" (Non-Fragile Items Only)</option>
                      <option value="25">Tear-Proof Polyethylene Mailers - 9" x 12" (Non-Fragile Items Only)</option>
                      <option value="26">7 1/2" x 5 1/8" x 14 3/8" (FREE USPS BOX)</option>
                      <option value="27">7" x 7" x 6" (FREE USPS BOX)</option>
                      <option value="28">11.5" x 2.5" x 13.5" (FREE USPS BOX)</option>
                      <option value="29">12.5" x 3" x 15" (FREE USPS BOX)</option>
                      <option value="30">12" x 12" x 8" (FREE USPS BOX)</option>
                      <option value="31">No Box</option>
                      <option value="33">Standard U-Line Brown Box (24 x 14 x 10)</option>
                    </select>
                  </div>

                  <div id="box_type_3" style="display: none;">
                    <label>Box Type 3</label>
                    <select name="data[InventoryItem][box_id_3]" id="InventoryItemBoxId3" style="height: 59px; width: 66%; font-size: 45px;">
                      <option value="">Choose</option>
                      <option value="1">10 x 10 x 10"</option>
                      <option value="2">10 x 10 x 5"</option>
                      <option value="3">16 x 10 x 10"</option>
                      <option value="4">18 x 12 x 6"</option>
                      <option value="5">18 x 6 x 45" (Guitar Box)</option>
                      <option value="6">20 x 14 x 16"  </option>
                      <option value="7">20 x 14 x 6"</option>
                      <option value="8">20 x 20 x 20" </option>
                      <option value="9">20 x 8 x 50" (Guitar Box)</option>
                      <option value="10">24 x 14 x 14"</option>
                      <option value="11">24 x 24 x 24"</option>
                      <option value="12">28 x 18 x 18"</option>
                      <option value="13">54" x 8" x 28" (Bike-Small)</option>
                      <option value="14">56" x 10" x 32" (Bike-Large)</option>
                      <option value="15">6 x 6 x 2"</option>
                      <option value="16">7 x 7 x 3"</option>
                      <option value="17">8 x 6 x 4" </option>
                      <option value="18">8 x 8 x 60"</option>
                      <option value="19">Bubble Mailer Envelope - 11 1/2" x 8 1/4" </option>
                      <option value="20">Bubble Mailer Envelope - 5" x 10"</option>
                      <option value="21">Tear-Proof Polyethylene Mailers - 10" x 13"  (Non-Fragile Items Only)</option>
                      <option value="22">Tear-Proof Polyethylene Mailers  - 12" x 15 1/2" (Non-Fragile Items Only)</option>
                      <option value="23">Tear-Proof Polyethylene Mailers  - 6" x 9" (Non-Fragile Items Only)</option>
                      <option value="24">Tear-Proof Polyethylene Mailers - 7 1/2" x 10 1/2" (Non-Fragile Items Only)</option>
                      <option value="25">Tear-Proof Polyethylene Mailers - 9" x 12" (Non-Fragile Items Only)</option>
                      <option value="26">7 1/2" x 5 1/8" x 14 3/8" (FREE USPS BOX)</option>
                      <option value="27">7" x 7" x 6" (FREE USPS BOX)</option>
                      <option value="28">11.5" x 2.5" x 13.5" (FREE USPS BOX)</option>
                      <option value="29">12.5" x 3" x 15" (FREE USPS BOX)</option>
                      <option value="30">12" x 12" x 8" (FREE USPS BOX)</option>
                      <option value="31">No Box</option>
                      <option value="33">Standard U-Line Brown Box (24 x 14 x 10)</option>
                    </select>
                  </div>


                  <label>Order Number</label>
                  <input name="data[ShipOrder][order_number]" type="number" class="serial">

                  <button id="submit_shipment" class="button" style="width: 200px !important;margin-top: 20px;">Submit</button>
                </form>

                <button id="add_box" class="button" style="width: 200px !important;margin-top: 20px;">Add Box</button>
                <button id="remove_box" class="button" style="display: none; width: 200px !important;margin-top: 20px;">Remove Box</button>
              </div>
              <div class="view_serial" style="display:none;">
              </div>
            </div>
            <div class="screen find_locations">
              <h2>Find Locations</h2>
              <div class="enter_serial">
                <form id="location_serial" onsubmit="return false;">
                  <label>Serial Number</label>
                  <input name="data[InventoryItem][id]" type="text" class="serial" style="height: 40px; width: 66%; font-size: 45px;">
                </form>
              </div>
              <div class="view_serial" style="display:none;">
              </div>
            </div>
            <div class="screen audit">
              <h2>Audit</h2>
              <div class="enter_serial">
                <form id="auditForm" onsubmit="return false;">
                  <label>Serial</label>
                  <input name="data[InventoryItem][id]" type="text" class="serial">
                </form>
              </div>
              <div class="view_serial" style="display:none;">
              </div>
            </div>
            <div class="screen uncheckout">
              <h2>Uncheckout</h2>
              <form id="uncheckoutForm" onsubmit="return false">
                <label>Serial</label>
                <input name="data[InventoryItem][id]" type="text" class="serial">
              </form>
            </div>
            <div class="screen checkout">
              <h2>Checkout</h2>
              <form id="checkoutForm" onsubmit="return false">
                <label>Ebay Order Number</label>
                <input name="data[InventoryItem][ebay_order_number]" class="ordernum" type="number" style="height: 40px; width: 66%; font-size: 45px;">

                <label>Serial</label>
                <input name="data[InventoryItem][id]" type="text" class="serial">
              </form>
            </div>
            <div class="screen relist">
              <h2>Relist</h2>
              <div id='getParent'>
                <form id='relistFormParent' action='' method='post' onsubmit="return false">
                  <label>UPC</label>
                  <input name="data[InventoryItem][id]" type="text" class="serial">
                </form>
              </div>
              <div id='enterChildInfo'>
                <form id='relistFormChild' action='' method='post'>
                  <label>Original Listing Price</label>
                  <input name="data[Parent][InventoryItem][original_listing_price]" type="text" class="serial original_listing_price">
                  <label>Listing Price</label>
                  <input name="data[Parent][InventoryItem][listing_price]" type="text" class="serial listing_price">
                  <label>Rock Bottom</label>
                  <input name="data[Parent][InventoryItem][rock_bottom]" type="text" class="serial rock_bottom">
                  <label for="InventoryItemShelf">Location</label>
                  <input name="data[InventoryItem][shelf]" type="text" class="serial relist_shelf">
                  <label for="InventoryItemShelf">Child</label>
                  <input name="data[InventoryItem][child_serial]" type="text" class="serial child">

                  <br><br><br><a href='#' onclick="$('#enterChildInfo').hide();$('#getParent').show();$('#relistFormParent').show();return false;" style="color: #c4942f; font-size:22px;">Go Back</a>
                </form>
                <a href='#' onclick="$('#enterChildInfo').hide();$('#relistFormParent').show();$('#relistFormParent .serial').val('');">Go Back</a>
              </div>
            </div>
            <div class="screen create_invoice">
              <h2>Create Invoice</h2>

              <form id='createInvoice' action='' method='post'>
                <div class="input_block">
                  <label>Add Items to Invoice #<span class="invoice_number"></span></label>
                  <label>Serial</label>
                  <input name="data[InventoryItem][id]" type="text" class="serial">
                  <input name="data[Invoice][id]" type="hidden" id="invoiceId">

                  <button id="finish_invoice" class="button" style="width: 240px !important;margin-top: 20px;">Finish Invoice</button>
                </div>

              </form>
            </div>
            <div class="screen list_to_amazon">
              <h2>List On Amazon</h2>
              <form id="listAmazonForm" action="" method="post">
                <div class="input_block">
                  <label>UPC</label>
                  <input name="data[InventoryItem][upc]" class="upc" type="number" style="height: 40px; width: 66%; font-size: 45px;"><br>
                  <label>Serial</label>
                  <input name="data[InventoryItem][id]" type="text" class="serial">
                  <button id="submit_amazon" class="button" style="width: 440px !important;margin-top: 20px;">Add To Amazon</button>
                </div>
              </form>
            </div>
            <div class="screen warehouse_checkin">
              <h2>Warehouse Checkin</h2>

              <form id='warehouseCheckinForm' action='' method='post'>
                <div class="input_block">
                  <label>Disposition</label>
                  <select name="data[InventoryItem][warehouse_disposition]" class="disposition">
                    <option>Choose</option>
                    <option value="Counterfeit">Counterfeit</option>
                    <option value="Flea Market">Flea Market</option>
                    <option value="Gift Card">Gift Card</option>
                    <option value="In House">In House</option>
                    <option value="Medical">Medical</option>
                    <option value="Ready to List">Ready to List</option>
                    <option value="Relist">Relist</option>
                    <option value="Return to Retail">Return to Retail</option>
                    <option value="Sports Needs Authentication">Sports Needs Authentication</option>
                    <option value="Vault Room">Vault Room</option>
                  </select>
                </div>

                <div class="input_block internal_notes">
                  <label>Internal Notes</label>
                  <input type="text" name="data[InventoryItem][internal_notes]" id="internal_notes">
                </div>

                <div class="input_block">
                  <label>Serial</label>
                  <input name="data[InventoryItem][id]" type="text" class="serial">
                </div>
              </form>
            </div>
        </div>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>

        <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyATduI8M5HHjJ_bqazs7t9XwoljIzLLKmQ",
            authDomain: "pawnpireassistant.firebaseapp.com",
            databaseURL: "https://pawnpireassistant.firebaseio.com",
            projectId: "pawnpireassistant",
            storageBucket: "pawnpireassistant.appspot.com",
            messagingSenderId: "95552872103"
          };
          firebase.initializeApp(config);

          // poll the messages every half second
          setInterval(function() {
            firebase.database().ref('alert').once('value').then(function(value) {
                if (value.val()) {
                  message = value.val();
                  if (message.message) {
                    $('.cancelled_orders').html('');
                    $('.other_issues').html('');

                    $(message.message).each(function(index, item) {
                      for (var i in item) {

                        // if the user is filtering text, only show items that pass filter
                        if ((window.filter_shipping && item[i].indexOf(window.filter_shipping) != -1) || !window.filter_shipping) {

                          // sort out cancelled versus other issues
                          if (item[i].indexOf('cancel') != -1) {
                            $('.cancelled_orders').append("<li>" + item[i] + "</li>");
                          } else {
                            $('.other_issues').append("<li>" + item[i] + "</li>");
                          }
                        }
                      } 
                    });

                    //$('#globalstatus').html(text);
                  }
                } else {
                    //$('#globalstatus').html('');
                }
            });
          }, 10000);      
        </script>
        <script type="text/javascript">
            app.initialize();

            window.is_submitting = false;
            var version = '0.1.0';

            $(document).ready(function() {
              // fetch a list of audit groups
              // fetch the latest version
              //  TODO: FINISH THIS

              $('#create_invoice').click(function() {
                $.post('https://www.pawnpire.com/assistant/create_invoice', $('#UserLoginForm').serialize(), function(data) {
                  $('.invoice_number').html(data.invoice_id);
                  $('#invoiceId').val(data.invoice_id);
                }, 'json');
              });

              $('body').on('click', '.mark_received', function(e) {
                e.preventDefault();
                count = prompt('How many?');
                var element = $(this);

                $.get('https://www.pawnpire.com/manifests/mark_received/' + $(this).data('manifest_line') + '/' + count + '/' + $('#UserUsername').val(), function(data) {
                  alert(count + ' marked received');
                  console.log(data.amount);
                  element.html(data.amount);
                }, 'json');
              });

              $('#shipping_issue_search').on('keyup', function() {
                window.filter_shipping = $(this).val();
              });

              $('#warehouse_checkin').click(function() {
                $('#globalstatus').hide();
              });

              $('#menu').click(function() {
                $('#globalstatus').show();
              });

              $('.internal_notes').hide();

              window.stage = "login";
              transition(window.stage);

              $('#login').click(function(e) {
                e.preventDefault();

                $.post('https://www.pawnpire.com/assistant/login', $('#UserLoginForm').serialize(), function(data) {
                  if (data.response == 'success') {

                    $('#status').html("Logged in successfully");

                    // store credentials
                    localStorage.setItem('credentials', $('#UserLoginForm').serialize());

                    $.post('https://www.pawnpire.com/assistant/get_audit_groups', localStorage.getItem('credentials') + '&' + $('#audit_group').serialize(), function(data) { 
                      var results = [];
                      for (var i in data) { 
                         results.push([i, data[i]]);
                      }

                      $(results).each(function(id, name) {
                        info = name.toString().split(',');
                        $('#audit_group select').append('<option value="' + info[0] + '">' + info[1] + '</option>')
                        console.log(id + " - " + name);
                      });
                    }, 'json');


                    setTimeout(function() {
                      transition('menu');
                    }, 500);

                  } else { 
                    $('#status').html("Incorrect username/password combo");
                  }
                }, 'json');
              });

              $('.go_to').click(function(e) {
                e.preventDefault();

                if ($(this).attr('id') == 'logout') { 
                  localStorage.removeItem('credentials');
                  transition('login');
                  $('#menu').hide();

                  $('#UserUsername').val('');
                  $('#UserPassword').val('');
                } else {
                  transition($(this).attr('id'));
                }
              });

              $('#warehouseCheckinForm, #createInvoice').on('submit', function(e) {
                e.preventDefault();
                return false;
              });

              $('#create_warehouse_bin_btn').click(function(event) {
                event.preventDefault();

                $.post('https://www.pawnpire.com/assistant/create_bin/' + $('#check_upc_cost_form .serial').val() + '/' + $('#check_upc_cost_form .bin_cost').val() + '/' + $('#check_upc_cost_form .bin_estimate').val(), localStorage.getItem('credentials'), function(data) {
                  if (data.success) {
                    $('#check_upc_cost_form .serial').val('');
                    $('#check_upc_cost_form .bin_cost').val('');
                    $('#check_upc_cost_form .bin_estimate').val('')

                    alert('Bin created successfully');
                  } else {
                    alert('Unable to create bin');
                  }
                }, 'json');
              });

              $('#serial_audit_projct_submit').click(function(event) {
                $('#audit_project_form .location').hide();
                $('#audit_project_form .location_input').val('');

                $.post('https://www.pawnpire.com/assistant/get_location/' + $('#audit_project_form .serial').val(),  localStorage.getItem('credentials'), function(data) {
                  if (data.success) {
                    $('#audit_project_form .location').show();
                    $('#audit_project_form .location_input').val(data.location); 
                  } else {
                    alert("Unable to find serial number");
                  }
                }, 'json');
              });

              $('#submit_audit_project_form').click(function() {
                $.post('https://www.pawnpire.com/assistant/add_july/' + $('#audit_project_form .serial').val() + '/' + $('#audit_project_form .location_input').val(),  localStorage.getItem('credentials'), function(data) {
                  // do something with this
                  $('#audit_project_form .location').hide();
                  $('#audit_project_form .location_input').val('');
                  $('#audit_project_form .serial').val('');
                  alert("Added successfully");
                }, 'json');
              
              });

              $('#submit_upc_cost_check').click(function(event) {
                event.preventDefault();
                $.get('https://www.pawnpire.com/manifests/price_check/' + $('#check_upc_cost_form .serial').val(), function(data) {
                  if (data.cost) {
                    $('#check_upc_cost_form .serial').val('');
                    alert("Cost: " + data.cost + " Retail: " + data.retail);
                  } else {
                    alert('could not find cost');
                  }
                }, 'json');
              });

              $('#submit_upc_location').click(function(event) {
                event.preventDefault();
                $.get('https://www.pawnpire.com/manifests/document_location/' + $('#pallet_location_form .serial').val() + '/' + $('.upc_amount').val() + '/' + $('.upc_location').val() + '/' + $('#UserUsername').val(), function(data) {
                  $('.upc_amount').val('');
                  $('.upc_location').val('');
                }, 'json');
              });

              $('#check_serial .serial').keyup(function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                  window.is_submitting = true;
                  
                  $('#pull_status').html('');

                  $.post('https://www.pawnpire.com/assistant/check_pull', localStorage.getItem('credentials') + '&' + $('#check_serial').serialize(), function(data) {
                    if (data.status == 'pull') {
                      $('#pull_status').html('<h3 style="text-align: center; font-size: 30px; color: #CC0000;">PULL</h3>');
                    } else {
                      $('#pull_status').html('<h3 style="text-align: center; font-size: 30px; color: #00CC00;">LEAVE</h3>');
                    }

                    $('#check_serial .serial').val('');
                    window.is_submitting = false;
                  }, 'json');
                }

              });

              $('#check_shipping_form .serial').keyup(function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                  window.is_submitting = true;
                  $.post('https://www.pawnpire.com/assistant/shipping_status/' + $(this).val(), localStorage.getItem('credentials'), function(data) {
                    window.is_submitting = false;
                    $('#check_shipping_form .serial').val('');
                    if (data.shipped) {
                      alert('This was shipped on ' + data.date + ' by ' + data.ship_by);
                    } else {
                      alert("There is no shipping info for this item");
                    } 
                  }, 'json');
                }
              });

              $('#flea_market_sale .price').keyup(function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                  window.is_submitting = true;
                  $.post('https://www.pawnpire.com/assistant/mark_flea_sold', localStorage.getItem('credentials') + '&' + $('#flea_market_sale').serialize(), function(data) {
                    window.is_submitting = false;
                    $('#flea_market_sale')[0].reset();
                    alert('Recorded');
                  }, 'json');
                }
              });

              $('#audit_group_add .serial').keyup(function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                  window.is_submitting = true;
                  event.preventDefault();

                  $.post('https://www.pawnpire.com/assistant/create_audit_group', localStorage.getItem('credentials') + '&' + $('#audit_group_add').serialize(), function(data) {
                    if (data.success) {
                      alert('audit group created');
                      $('#audit_group_add .serial').val('');
                    } else {
                      alert('an error occured');
                    }
                    window.is_submitting = false;
                  }, 'json');
                }
              });

              $('#audit_group .serial').keyup(function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                  window.is_submitting = true;
                  event.preventDefault();

                  $.post('https://www.pawnpire.com/assistant/add_to_audit', localStorage.getItem('credentials') + '&' + $('#audit_group').serialize(), function(data) {
                    if (data.success) {
                      alert('item added');
                      $('#audit_group .serial').val('');
                    } else {
                      alert('an error occured');
                    }
                    window.is_submitting = false;
                  }, 'json');
                }
              });

              $('#createInvoice .serial').keyup(function(event) {
                event.preventDefault();
                if (event.keyCode == 13 || ($('#createInvoice .serial').val().length >= 6 && !isNaN($('#createInvoice .serial').val())) && !window.is_submitting) {
                  window.is_submitting = true;
                  event.preventDefault();

                  $.post('https://www.pawnpire.com/assistant/add_to_invoice', localStorage.getItem('credentials') + '&' + $('#createInvoice').serialize(), function(data) {
                    if (data.success) {
                      alert('item added');
                      $('#createInvoice .serial').val('');
                    }
                    window.is_submitting = false;
                  }, 'json');
                }
              });

              $('#finish_invoice').click(function() {
                $.post('https://www.pawnpire.com/assistant/finalize_invoice', localStorage.getItem('credentials') + '&' + $('#createInvoice').serialize(), function(data) {
                  $('#invoiceId').val('');
                  transition('menu');
                }, 'json');
              });

              $('#notFoundForm .serial').keyup(function(event) {
                if (event.keyCode == 13 || ($('#notFoundForm .serial').val().length >= 6 && !isNaN($('#notFoundForm .serial').val()))) {
                  event.preventDefault();
                  $.post('https://www.pawnpire.com/assistant/not_found', localStorage.getItem('credentials') + '&' + $('#notFoundForm').serialize(), function(data) {
                    if (data.response == 'success') {
                      $('#status').html($('#notFoundForm .serial').val() + ' reported not found');
                      $('#notFoundForm input').val('');
                    }
                  }, 'json');
                }
              });

              $('#check_order_form .serial').keyup(function(event) {
                if (!window.is_submitting) {
                  if (event.keyCode == 13) {
                    window.is_submitting = true;

                    event.preventDefault();
                    $.post('https://www.pawnpire.com/assistant/get_order_items', localStorage.getItem('credentials') + '&' + $('#check_order_form').serialize(), function(data) {
                      if (data.success) {
                        var html_response = "<strong>" + data.item.title + "</strong><br>";
                        html_response += "<img src='https://www.pawnpire.com/" + data.item.image + "' style='max-width: 90%;'><br>";
                        html_response += data.item.address + "<br>";
                        html_response += '<center><a href="#" onclick="$(\'#check_order_form_response\').html(\'\'); $(\'#check_order_form .serial\').val(\'\');" style="font-size:23px;color: #c4942f;text-decoration: none;">Back</a></center>';
                        $('#check_order_form_response').html(html_response);
                      }

                      window.is_submitting = false;
                    }, 'json');
                  }
                }
              });

              function submit_order() {
                    if ($('#globalstatus').html().indexOf(" " + $('#checkoutForm .serial').val()) !== -1) {
                      alert('There is a pending cancellation request for this item.  Do not ship');
                    } else {
                      window.is_submitting = true;

                      event.preventDefault();
                      $.post('https://www.pawnpire.com/assistant/ship_order', localStorage.getItem('credentials') + '&' + $('#ship_order_form').serialize(), function(data) {
                        if (data.response == 'success') {
                          $('#status').html($('#ship_order_form .serial').val() + ' shipped out');
                          $('#ship_order_form .serial').val('');
                          $('select#InventoryItemBoxId').val('');
                          $('select#InventoryItemBoxId2').val('');
                          $('select#InventoryItemBoxId3').val('');
                        } else {
                          alert('Unable to mark shipped');
                        }

                        window.is_submitting = false;
                      }, 'json');
                    }
              }

              $('#ship_order_form .serial').keyup(function(event){
                if (!window.is_submitting) {
                  if (event.keyCode == 13) {
                    submit_order();
                  }
                }
              });

              $('#uncheckoutForm .serial').keyup(function(event){
                if (event.keyCode == 13 || ($('#uncheckoutForm .serial').val().length >= 6 && !isNaN($('#uncheckoutForm .serial').val()))) {
                  event.preventDefault();
                  $.post('https://www.pawnpire.com/assistant/uncheck_out', localStorage.getItem('credentials') + '&' + $('#uncheckoutForm').serialize(), function(data) {
                    if (data.response == 'success') {
                      $('#status').html($('#uncheckoutForm .serial').val() + ' unchecked out');
                      $('#uncheckoutForm .serial').val('');
                    }
                  }, 'json');
                }
              });

              $('#checkoutForm .ordernum').keyup(function(event) {
                if (event.keyCode == 13) {
                  $('#checkoutForm .serial').focus();
                }
              });

              $('#checkoutForm .serial').keyup(function(event){
                if (!window.is_submitting) {
                  if (event.keyCode == 13 || ($('#checkoutForm .serial').val().length >= 6 && !isNaN($('#checkoutForm .serial').val()))) {
                        if ($('#globalstatus').html().indexOf(" " + $('#checkoutForm .ordernum').val()) !== -1 && $('#checkoutForm .serial').val()) {
                        alert('There is a pending cancellation request for this item.  Do not ship');
                     } else {
                      window.is_submitting = true;

                      event.preventDefault();

                      // first send request to server to see if they have shipping info
                      $.post('https://www.pawnpire.com/assistant/get_shipping_info', localStorage.getItem('credentials') + '&' + $('#checkoutForm').serialize(), function(data) {
                        if (data.response != 'no_requests') {
                          if (confirm("This serial has a shipping request: " + data.issue.Issue.message)) {
                            $.post('https://www.pawnpire.com/assistant/acknowledge_shipping_info', localStorage.getItem('credentials') + '&' + $('#checkoutForm').serialize(), function(data) {
                            }, 'json')
                          }
                        }

                        $.post('https://www.pawnpire.com/assistant/check_out', localStorage.getItem('credentials') + '&' + $('#checkoutForm').serialize(), function(data) {
                          if (data.response == 'success') {
                            $('#status').html($('#checkoutForm .serial').val() + ' checked out');
                            $('#checkoutForm input').val('');
                            $('#checkoutForm .ordernum').focus();

                          } else if (data.response == 'select_child') {
                            if ($('#checkoutForm div').length) {
                              return; // if they double posted, don't worry about showing this again
                            }
                            var linkHtml = "<div style=\"font-size: 24px; line-height: 40px;\"><center><br><br><strong style='color: white;'>SELECT CHILD</strong><br>";

                            for (i = 0; i<data.children.length; i++) {
                              linkHtml += "<a href='#' onclick='$(\"#checkoutForm .serial\").val(\"" + data.children[i] + "\").trigger(\"keyup\"); $(\"#checkoutForm div\").remove(); return false;' style='color: #c4942e;'>" + data.children[i] + "</a><br>";
                            }
                              
                            linkHtml += "</center></div>";

                            console.log(linkHtml);

                            $('#checkoutForm').append(linkHtml);
                          } else {
                            $('#status').html('An error has occurred');
                          }
                            
                          setTimeout(function() {
                            $('#status').html('');
                          }, 1500);

                          window.is_submitting = false;
                        }, 'json');

                      }, 'json');
                     } 
                  } 
                }
              });

              $('#warehouseCheckinForm .serial').keyup(function(event){
                if( ($('#warehouseCheckinForm .serial').val().length >= 6 && !isNaN($('#warehouseCheckinForm .serial').val())) || event.keyCode == 13){
                  event.preventDefault();
                  $.post('https://www.pawnpire.com/assistant/warehouse_checkin', localStorage.getItem('credentials') + '&' + $('#warehouseCheckinForm').serialize(), function(data) {
                    if ($('#warehouseCheckinForm .serial').val()) { 
                      if (data.response == 'success') {
                        if (data.message) {
                          $('#status').html('<span style="color: #00BB00;">' + $('#warehouseCheckinForm .serial').val() + ' checked in<br>' + data.message + '</span>');
                        } else {
                          $('#status').html('<span style="color: #00BB00;">' + $('#warehouseCheckinForm .serial').val() + ' checked in</span>');
                        }

                        $('#warehouseCheckinForm .serial').val('');
      $('#internal_notes').val('');
                      } else {
                        $('#status').html('An error occured');
                      } 
                    }
                  }, 'json');
                }
              });

              $('#enterChildInfo').hide();

              $('.relist_shelf').on('keyup', function() {
                if ($('.relist_shelf').val().length >= 4) {
                  $('.child').focus();
                }
              });

              $('#relistFormChild .child').keyup(function(event){
                if (!window.is_submitting) {
                  if(event.keyCode == 13 || $('#relistFormChild .child').val().length >= 6){
                    window.is_submitting = true;
                    $('#status').html('Contacting ebay, please wait');
                    event.preventDefault();
                    $.post('https://www.pawnpire.com/assistant/relist_item', localStorage.getItem('credentials') + '&' + $('#relistFormParent').serialize() + '&' +    $('#relistFormChild').serialize(), function(data) {
                        if (data.response == 'success') {
                          $('#status').html('Relisted successfully');
              
                          setTimeout(function() {
                            $('#relistFormChild')[0].reset();
                            $('#relistFormParent')[0].reset();
              
                          $('#enterChildInfo').hide();
                          $('#relistFormParent').show();   
                          $('#status').html('');        
                          }, 500)
                        } else {
                          $('#status').html('An error occurred');
                        }

                        window.is_submitting = false;
                      }, 'json').fail(function() {
                        $('#status').html('An error occurred');
                                      window.is_submitting = false;
                        }).always(function() {
                                      window.is_submitting = false;
                        });
                  }
                }
              });
              
              $('#relistFormParent .serial').keyup(function(event){
                if(event.keyCode == 13 || $('#relistFormParent .serial').val().length >= 12){
                  event.preventDefault();
                  $.post('https://www.pawnpire.com/assistant/get_parent', localStorage.getItem('credentials') + '&' + $('#relistFormParent').serialize(), function(data) {
                    if (data.response == 'success') {
                      $('.original_listing_price').val(data.original_listing_price);
                      $('.listing_price').val(data.listing_price);
                      $('.rock_bottom').val(data.rock_bottom);
                      $('#enterChildInfo').show();
                      $('#relistFormParent').hide();
                    } else {
                      $('#status').html('An error occured');
                      setTimeout(function() {
                        $('#status').html('');
                      }, 500);
                    }
                  }, 'json');
                }
              });

              $('#menu').hide();

              // show description if warehouse inventory gets checked in for 'in house' use
              $('.disposition').change(function() {
                if ($(this).val() == "In House") {
                  $('.internal_notes').show();
                } else {
                  $('.internal_notes').hide();
                }
              })

              $('#check_pallet_form .serial').keyup(function(event) {
                if (event.keyCode == 13) {
                  event.preventDefault();
                  $.get('https://www.pawnpire.com/manifests/get_pallet_contents/' + $('#check_pallet_form .serial').val(), function(data) {
                    $('#pallet_contents').html('');

                    if (!data) {
                      $('#pallet_contents').html('<span color="red">No pallet found</span>');
                    } else {
                      content = "<table border=0 cellspacing=0 cellpadding=0><tr><td>Item</td><td>Qty Shipped</td><td>Qty Rcvd</td></tr>";
                      $.each(data, function(index, value) {
                        content += "<tr><td>" + value.ManifestLine.model_name + "</td><td> " + value.ManifestLine.total_quantity + "</td><td><a href='#' class='mark_received' data-manifest_line='" + value.ManifestLine.id + "'>" + value.ManifestLine.amount_checked_in + "</a></td></tr>";
                      });

                      content += "</table>";
                      $('#pallet_contents').html(content);
                    }
                  }, 'json');
                }
              });

              $('#location_serial .serial').keyup(function(event) {
                if (event.keyCode == 13 || ($('#location_serial .serial').val().length >= 6 && !isNaN($('#location_serial .serial').val()))) {
                  event.preventDefault();
                  $.post('https://www.pawnpire.com/assistant/find_location', localStorage.getItem('credentials') + '&' + $('#location_serial').serialize(), function(data) {
                    if (data.response == 'success') {
                      $('.enter_serial').hide();
                      $('.view_serial').show();

                      output = data.location_info;
                      output += '</table><br><center><a href="#" onclick="$(\'.enter_serial\').show(); $(\'#location_serial .serial\').val(\'\'); $(\'.view_serial\').hide();" style="font-size:23px;color: #c4942f;text-decoration: none;">Back</a></center>';

                      $('.view_serial').html(output);
                    }
                  }, 'json');
                }
              });

              $('#submit_amazon').click(function(event) {
                event.preventDefault();

                $.post('https://www.pawnpire.com/assistant/addAmazon', localStorage.getItem('credentials') + '&' + $('#listAmazonForm').serialize(), function(data) {
                  if (data.response == 'success') {
                    alert("added"); $('#listAmazonForm')[0].reset();
                  }  else { alert("error"); }
                }, "json");
              });

              $('#auditForm .serial').keyup(function(event) {
                if (event.keyCode == 13 || ($('#auditForm .serial').val().length >= 6 && !isNaN($('#auditForm .serial').val()))) {
                  event.preventDefault();
                  $.post('https://www.pawnpire.com/assistant/audit', localStorage.getItem('credentials') + '&' + $('#auditForm').serialize(), function(data) {
                    if (data.response == 'success') {
                      $('.enter_serial').hide();
                      $('.view_serial').show();
              
                      $('.view_serial').html(); // clear out any old html that may be there
              
                      output = '<table border=0 cellspacing=0 cellpadding=10 style="color: white;width: 90%;margin: auto;text-align: left; font-size:23px;">';
              
                      if (data.ebayLink) {
                        output += '<tr><td>Ebay Listing</td><td>LISTED <a href="' + data.ebayLink + '" style="color:white !important;">Click Here</a></td></tr>';
                      } else {
                        output += '<tr><td>Ebay Listing</td><td><a href="#" style="color:red;text-decoration:none">NOT FOUND</a></td></tr>';
                      }

                      if (data.ebayListingDate) {
                        output += '<tr><td>Ebay listing Date</td><td>' + data.ebayListingDate + '</td></tr>';
                      }

                      if (data.warehouseCheckin) {
                        output += '<tr><td>Warehouse Checkin Date</td><td>' + data.warehouseCheckin + '</td></tr>';
                      }
              
                      if (data.warehouseCheckUser) {
                        output += '<tr><td>Warehouse Checkin User</td><td>' + data.warehouseCheckUser + '</td></tr>';
                      }

                      if (data.warehouseCheckDisp) {
                        output += '<tr><td>Warehouse Checkin Disp.</td><td>' + data.warehouseCheckDisp + '</td></tr>';
                      }

                      output += '<tr><td>Days In Inventory</td><td>' + data.dii + '</td></tr>';
                      output += '<tr><td>Cost</td><td>' + data.cost + '</td></tr>';

                      if (data.sale_date) {
                        output += '<tr><td>Last Sale Date</td><td>' + data.sale_date + '</td></tr>';
                      }

                      if (data.checkOutDate) {
                        output += '<tr><td>Check Out Date</td><td>' + data.checkOutDate + '</td></tr>';
                      }

                      if (data.checkOutUser) {
                        output += '<tr><td>Check Out Employee</td><td>' + data.checkOutUser + '</td></tr>';
                      }

                      if (data.shipmentDate) {
                        output += '<tr><td>Shipment Date</td><td>' + data.shipmentDate + '</td></tr>';
                      }

                      if (data.shipper) {
                        output += '<tr><td>Shipper</td><td>' + data.shipper + '</td></tr>';
                      }

                      output += '<tr><td>Current Price</td><td>' + data.price + '</td></tr>';
                      output += '<tr><td>Markdown %</td><td>' + data.markdown + '</td></tr>';
                      output += '<tr><td>Location</td><td>' + data.location + '</td></tr>';
                      output += '</table><br><center><a href="#" onclick="$(\'.enter_serial\').show(); $(\'#auditForm .serial\').val(\'\'); $(\'.view_serial\').hide();" style="font-size:23px;color: #c4942f;text-decoration: none;">Back</a></center>';
              
                      $('.view_serial').html(output);
                    }
                  }, 'json');
                }
              })

              $('#submit_shipment').click(function() {
                submit_order();
              });

              $('#add_box').click(function() {
                window.box_count++;

                // don't show the add box if we have 3 or more boxes already addd
                if (window.box_count >= 3) {
                  window.box_count = 3;
                  $('#add_box').hide();
                } else {
                  $('#add_box').show();
                } 

                $('#remove_box').show();

                $('#box_type_' + window.box_count).show();
              });
  
              $('#remove_box').click(function() {
                if (window.box_count > 1) {
                  $('#box_type_' + window.box_count).hide();
                  window.box_count--;
                }
      
                if (window.box_count < 3) {
                  $('#add_box').show();
                }

                if (window.box_count == 1) {
                  $('#remove_box').hide();
                }
              });

              window.box_count = 1;

            });


            function transition(stage) {
              if (stage == 'menu') {
                $('#menu').hide();
              } else {
                $('#menu').show();
              }

              $('.screen').hide();
              $('.' + stage).show();
              $('#status').html('');
            }
        </script>
    </body>
</html>

